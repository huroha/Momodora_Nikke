---
구현 주차: 3주차
date: 2024-12-16
tags:
  - DirectX
  - momodora
  - Portfolio
---
### 작업 내용
---


#### 플레이어 특수스킬 작업 완료
- 플레이어의 마나가 100인 상태에서 R 키를 누르면 10초간 강화상태에 돌입한다. 이때 3번째 평타는 화면 전체에 영향을 주는 공격으로 변경함. 입히는 데미지도 증가.
- PostProcess와 Particle로 현재 특수상태인것을 알 수 있도록 함.
- 마나는 특수상태가 아닐 시, 몬스터를 타격하면 10씩 증가

**플레이어 버스트 스킬 영상** *(GitHub에서는 동영상 미지원 - 플레이어 특수 스킬 시연)*

#### 플레이어 피격 처리 구현
- HitState 추가 및 적용 -> 피격의 짧은 시간동안에는 키입력을 받지않음

#### 폰트 임시 적용 완료
- Player의 Hp 상황이나, 대화에 쓰일 예정
- Font는 따로 기본 화면 rendering이 모두 끝난 다음에 추가적으로 Font Rendering을 진행한다.

>[!bug]
>피격시 밀림 오류
>현재 플레이어가 바라보고 있는 방향으로 밀리게 설정되어있었기에 공격받는 위치와 반대를 보고있으면 오히려 몬스터쪽으로 끌려들어가는 현상이 발생함.
>계산 주체를 플레이어의 방향이 아닌 몬스터의 위치와 플레이어의 위치의 차이를 바탕으로 계산하게끔 변경하였음.

#### NPC 대화 추가중
- Npc 대화에 Font를 이용함. Font는 화면의 절대적인 위치에 Rendering 되는 것이라, 카메라가 움직이면 폰트는 따라서 움직여지지 않는다. 카메라의 움직임에 맞추어 이동해도 되지만, 카메라 자체는 lerp 함수를 이용하고 있기때문에 싱크를 맞추기 쉽지않음. 카메라가 고정되어있는 상태에서만 출력되도록 조건을 잡아주었다.


